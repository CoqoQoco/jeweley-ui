
#### ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡πÄ‡∏•‡∏∞‡πÄ‡πÄ‡∏Å‡πâ‡πÑ‡∏Ç code ‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÄ‡πÄ‡∏ö‡∏ö‡πÉ‡∏ô E:\coqo_duangkeaw\Code\jeweley-ui\CLAUDE.md ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö
#### ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ prime-vue components >> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ generic-components ‡πÑ‡∏´‡∏° >> ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠ re-used >> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡πÄ‡∏•‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ ‡∏ó‡∏µ‡πà E:\coqo_duangkeaw\Code\jeweley-ui\src\components\prime-vue

>> ‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
>> flow >>>>>  ‡∏≠‡∏≠‡∏Å‡πÄ‡πÄ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏ï‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤(mobile) >> ‡∏ï‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤(web) >> ‡∏≠‡∏≠‡∏Å‡∏ú‡∏•‡∏ï‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤(web & mobile)
>> ‡∏≠‡∏≠‡∏Å‡πÄ‡πÄ‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏µ‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡πâ‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡πÄ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏°‡∏≤‡πÄ‡πÄ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏°‡∏≤
>> **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: Web version ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Tablet & Desktop ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô, Mobile ‡∏à‡∏∞‡∏°‡∏µ route ‡πÅ‡∏•‡∏∞ layout ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å

## 1. ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô (Web - Tablet & Desktop)

  **Flow**: Get Stock >> ‡∏ï‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤ >> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (export document) >> ‡∏ï‡∏µ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà >> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

  **Location**: `/sale/cost-stock-edit` (E:\coqo_duangkeaw\Code\jeweley-ui\src\views\sale\cost-stock\web\cost-edit\)

  ### Component Structure:
  ```
  /cost-stock/web/cost-edit/
  ‚îú‚îÄ‚îÄ index-view.vue (Main orchestrator)
  ‚îú‚îÄ‚îÄ components/
  ‚îÇ   ‚îú‚îÄ‚îÄ search-stock-view.vue (Stock search)
  ‚îÇ   ‚îî‚îÄ‚îÄ appraisal-form-view.vue (Appraisal form)

  /components/prime-vue/
  ‚îî‚îÄ‚îÄ AutoCompleteGeneric.vue (Reusable AutoComplete component)
  ```

  ### Features Implemented:
  ‚úÖ Stock Information Section (Read-only)
     - ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏¥‡∏ï (Stock Number)
     - ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)
     - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Description)

  ‚úÖ Customer Information (Modal-based Search & Create) - **Optional Field**
     - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ button (Search Customer - opens search modal)
     - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà button (Create New Customer - opens create modal, auto-fill customer info)
     - ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Name - display only)
     - ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Customer Address - display only)
     - ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ (Customer Phone - display only)
     - ‡∏≠‡∏µ‡πÄ‡∏°‡∏• (Customer Email - display only)
     - ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Remark/Notes - editable)
     - **Note**: Customer information is optional, can save without customer data

  ‚úÖ Price Appraisal Section
     - DataTable with groups: Gold, Gem, Worker, Embed, ETC
     - Auto-calculate total price per row (qty * qtyPrice + qtyWeight * qtyWeightPrice)
     - Group totals and grand total calculation
     - Add/remove transaction items with dropdown selection
     - **Auto-add "‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏õ‡πâ‡∏ô" (RINGP)** for Ring products (productType === 'R')
       - Automatically added to Gold group when stock is fetched
       - Only added if not already exists in transaction items
     - **Smart Input for Item Description (All types use AutoCompleteGeneric)**:
       - **All AutoComplete allow free text input** (forceSelection: false)
       - **Enter key does NOT submit form** (prevented in AutoCompleteGeneric component)
       - **Existing items from stock**: Read-only (disabled)
       - **New items - Dynamic based on group**:
         - **Gold (‡∏ó‡∏≠‡∏á)**: Hardcoded list + API combined (Master/MasterGold)
           - Hardcoded: "RINGP" (‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏õ‡πâ‡∏ô)
           - API: Additional gold types from master database
           - Display: code only
           - Free text allowed for custom gold types
         - **Gem (‡∏ß‡∏±‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö)**: Search from StockGem API (‡∏û‡∏•‡∏≠‡∏¢/‡πÄ‡∏û‡∏ä‡∏£)
           - Minimum 3 characters to trigger search
           - Auto-fill price when selected
           - Free text allowed for custom gems
         - **Worker (‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á)**: Static list (temporary master)
           - ‡∏Ñ‡πà‡∏≤‡∏ä‡∏∏‡∏ö, ‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå, ‡∏Ñ‡πà‡∏≤‡∏¢‡∏¥‡∏á‡πÄ‡∏•‡πÄ‡∏ã‡∏≠‡∏£‡πå, ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ó‡∏≥‡πÅ‡∏õ‡πâ‡∏ô, ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏±‡∏î‡∏û‡∏•‡∏≠‡∏¢
           - Free text allowed
         - **Embed (‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á)**: Static list (temporary master)
           - ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡∏û‡∏•‡∏≠‡∏¢, ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡πÄ‡∏û‡∏ä‡∏£, ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡πÄ‡∏Å‡∏™‡∏£, ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡πÅ‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡∏ô
           - Free text allowed
         - **ETC (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°)**: Static list (temporary master)
           - ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå, ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á, ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°, ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏∑‡πà‡∏ô‡πÜ, ‡∏Ñ‡πà‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
           - Free text allowed

  ‚úÖ Action Buttons
     - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save) ‚Üí isOriginCost = false
     - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å (Save as Origin Cost) ‚Üí isOriginCost = true
     - ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)

  ‚úÖ Responsive Design (Tablet & Desktop)
     - Uses new web responsive utility classes from `responsive-style/web/`
     - DataTable with horizontal scroll on tablet
     - Button groups wrap naturally
     - Tested at 1024px (tablet) and 1280px+ (desktop)
     - Import: `@import '@/assets/scss/responsive-style/web';`

  ### Changes from Original Requirements:
  - ‚ùå Removed Materials Section (‡∏ó‡∏≠‡∏á | ‡πÄ‡∏û‡∏ä‡∏£ | ‡∏û‡∏•‡∏≠‡∏¢)
  - ‚ùå Removed "Cost Per Piece" display and "Use cost as appraisal price" checkbox (not used)
  - ‚úÖ Stock information made read-only
  - ‚úÖ Customer selection via modal with two options:
    - Search existing customer (CustomerSearchModal)
    - Create new customer (CustomerCreateModal) - auto-fills customer info after creation
  - ‚úÖ Customer info display: name, address, phone, email (read-only)
  - ‚úÖ Customer information is **optional** (not required for saving)
  - ‚úÖ Remark field remains editable
  - ‚úÖ Integrated with new API endpoint `AddProductCostDeatialVersion`
  - ‚úÖ **Smart Input System** for transaction items:
    - Existing items from stock: Read-only input (cannot edit)
    - New items added by user: AutoCompleteGeneric with dynamic configuration
    - **All AutoComplete allow free text** - Users can type custom values not in lists
    - **Enter key prevention** - Pressing Enter in AutoComplete does NOT submit form
    - Gold: Hardcoded list (RINGP) + API combined
    - Gem: API search with auto-fill price
    - Worker/Embed/ETC: Temporary static lists with free text allowed
  - ‚úÖ **Auto-add "‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏õ‡πâ‡∏ô" (RINGP)** for Ring products (productType === 'R')
  - ‚úÖ Responsive for Tablet & Desktop only (Mobile has separate routes)

  ### API Integration:

  #### 1. Save Appraisal API
  - ‚úÖ **Implemented**: Save API endpoint `AddProductCostDeatialVersion`
  - API Store: `usrStockProductApiStore.fetchAddProductCostDeatialVersion()`
  - Location: `src/stores/modules/api/stock/product-api.js`
  - Request mapping:
    - Stock Number (stockNumber or stockNumberOrigin)
    - Customer Info (code, name, address, tel, email) - optional
    - Remark - optional
    - Price Transactions (prictransection array with qty, qtyPrice, qtyWeight, qtyWeightPrice)
    - **isOriginCost**:
      - `false` when clicking "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" (Save)
      - `true` when clicking "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å" (Save as Origin Cost)

  #### 2. Master Data APIs (AutoComplete)

  **Gold (‡∏ó‡∏≠‡∏á)**:
  - ‚úÖ Source: Hardcoded list + API combined
  - Hardcoded list: `hardcodedGoldList` in component
    - RINGP (‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏õ‡πâ‡∏ô)
  - API: `master-store.js` ‚Üí `fetchGold()`
  - Endpoint: `Master/MasterGold`
  - Returns: Combined array (hardcoded + API, no duplicates)
  - Usage: Static list for AutoComplete
  - **Free text allowed**: Can type custom gold types not in list

  **Gem (‡∏ß‡∏±‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö/‡∏û‡∏•‡∏≠‡∏¢/‡πÄ‡∏û‡∏ä‡∏£)**:
  - ‚úÖ Endpoint: `StockGem/Search`
  - Trigger: Minimum 3 characters typed
  - Returns: Array of gem/diamond items with name, code, price
  - Auto-fill: Automatically sets `qtyWeightPrice` when gem selected
  - **Free text allowed**: Can type custom gems not in database

  **Worker (‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á)**:
  - ‚è≥ **Temporary**: Static list in component (`masterWorkerList`)
  - üîú **TODO**: Create API endpoint when master data is ready
  - Current items: ‡∏Ñ‡πà‡∏≤‡∏ä‡∏∏‡∏ö, ‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå, ‡∏Ñ‡πà‡∏≤‡∏¢‡∏¥‡∏á‡πÄ‡∏•‡πÄ‡∏ã‡∏≠‡∏£‡πå, ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ó‡∏≥‡πÅ‡∏õ‡πâ‡∏ô, ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏±‡∏î‡∏û‡∏•‡∏≠‡∏¢
  - **Free text allowed**: Can type custom worker items

  **Embed (‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á)**:
  - ‚è≥ **Temporary**: Static list in component (`masterEmbedList`)
  - üîú **TODO**: Create API endpoint when master data is ready
  - Current items: ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡∏û‡∏•‡∏≠‡∏¢, ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡πÄ‡∏û‡∏ä‡∏£, ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡πÄ‡∏Å‡∏™‡∏£, ‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡πÅ‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡∏ô
  - **Free text allowed**: Can type custom embed items

  **ETC (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°)**:
  - ‚è≥ **Temporary**: Static list in component (`masterETCList`)
  - üîú **TODO**: Create API endpoint when master data is ready
  - Current items: ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå, ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á, ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°, ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏∑‡πà‡∏ô‡πÜ, ‡∏Ñ‡πà‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
  - **Free text allowed**: Can type custom ETC items

  ### Generic Components:

  #### AutoCompleteGeneric.vue
  **Location**: `src/components/prime-vue/AutoCompleteGeneric.vue`

  **Purpose**: Reusable AutoComplete component with support for both API and static list modes

  **Key Features**:
  - ‚úÖ **Free text input** - Users can type any value (forceSelection: false by default)
  - ‚úÖ **Enter key prevention** - Pressing Enter does NOT submit parent form
  - ‚úÖ **Dual mode support** - API or static list modes
  - ‚úÖ **Custom styling** - Flexible styling options

  **Modes**:
  1. **API Mode** (useStaticList: false) - Fetch data from API endpoint
  2. **Static List Mode** (useStaticList: true) - Use provided static options

  **Props**:
  - `modelValue` - v-model binding
  - **API Mode Props**:
    - `apiEndpoint` - API endpoint path (e.g., "StockGem/Search")
    - `searchField` - Field name for search query (default: "text")
    - `additionalSearchParams` - Additional search parameters (Object)
  - **Static List Mode Props**:
    - `staticOptions` - Array of static options (e.g., [{ code: 'RINGP', name: '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏õ‡πâ‡∏ô' }])
    - `useStaticList` - Enable static list mode (default: false)
  - **Common Props**:
    - `placeholder` - Placeholder text
    - `optionLabel` - Field name for option display (default: "name")
    - `forceSelection` - Force user to select from list (default: false) **[IMPORTANT: Set to false for free text]**
    - `minLength` - Minimum characters to trigger search (default: 1)
    - `disabled` - Disable state
    - `customClass` - Custom CSS class
    - `customStyle` - Custom inline styles
    - `skipLoading` - Skip global loading indicator (default: true)

  **Events**:
  - `@update:modelValue` - Model value changed
  - `@item-select` - Item selected from suggestions
  - `@search-complete` - Search completed with results

  **Slots**:
  - `#option` - Custom option template (receives `{ option }`)

  **Usage Examples**:

  **API Mode (Gem Search)**:
  ```vue
  <AutoCompleteGeneric
    v-model="selectedGem"
    apiEndpoint="StockGem/Search"
    searchField="text"
    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏û‡∏•‡∏≠‡∏¢/‡πÄ‡∏û‡∏ä‡∏£..."
    optionLabel="name"
    :forceSelection="true"
    :minLength="3"
    @item-select="onGemSelected"
  >
    <template #option="{ option }">
      <div>{{ option.name }} - {{ option.code }}</div>
    </template>
  </AutoCompleteGeneric>
  ```

  **Static List Mode (Gold)**:
  ```vue
  <AutoCompleteGeneric
    v-model="selectedGold"
    :useStaticList="true"
    :staticOptions="masterGoldList"
    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏≠‡∏á..."
    optionLabel="code"
    :forceSelection="false"
    @item-select="onGoldSelected"
  >
    <template #option="{ option }">
      <div>{{ option.code }}</div>
    </template>
  </AutoCompleteGeneric>
  ```

  ### References:
  - Stock fetch logic: `quotation-view.vue` line 970
  - Original appraisal screen: `edit-stock-view.vue` ~line 100
  - AutoComplete pattern: `update-process-view.vue` line 333
