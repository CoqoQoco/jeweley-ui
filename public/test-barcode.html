<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Barcode Printing - Honeywell PC42t</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #921313;
            border-bottom: 3px solid #921313;
            padding-bottom: 10px;
        }
        h2 {
            color: #038387;
            margin-top: 30px;
        }
        .info-box {
            background: #fffbea;
            border-left: 4px solid #fabc3f;
            padding: 15px;
            margin: 20px 0;
        }
        .success-box {
            background: #e8f5f5;
            border-left: 4px solid #038387;
            padding: 15px;
            margin: 20px 0;
        }
        .code-box {
            background: #f4f4f4;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        button {
            background: #038387;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #026d70;
        }
        button.secondary {
            background: #921313;
        }
        button.secondary:hover {
            background: #700f0f;
        }
        .radio-group {
            margin: 20px 0;
        }
        .radio-group label {
            margin-right: 20px;
            font-size: 16px;
        }
        input[type="radio"] {
            margin-right: 5px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            display: none;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñ®Ô∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î - Honeywell PC42t</h1>

        <div class="info-box">
            <strong>‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå:</strong><br>
            ‡∏£‡∏∏‡πà‡∏ô: Honeywell PC42t<br>
            ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: 203 DPI<br>
            ‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå: 4cm √ó 3cm (319 √ó 240 dots)<br>
            ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: EPL (default), ZPL
        </div>

        <h2>1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</h2>
        <div class="radio-group">
            <label>
                <input type="radio" name="connection" value="USB" checked>
                <strong>USB</strong> (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PC42t)
            </label>
            <label>
                <input type="radio" name="connection" value="Network">
                <strong>Network</strong> (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
            </label>
        </div>

        <div class="success-box" id="selectedConnection">
            <strong>‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠:</strong> <span id="currentConnection">USB</span>
        </div>

        <h2>2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå</h2>
        <div class="radio-group">
            <label>
                <input type="radio" name="language" value="EPL" checked>
                <strong>EPL</strong> (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PC42t)
            </label>
            <label>
                <input type="radio" name="language" value="ZPL">
                <strong>ZPL</strong> (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
            </label>
        </div>

        <div class="success-box" id="selectedLanguage">
            <strong>‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</strong> <span id="currentLanguage">EPL</span>
        </div>

        <h2>3. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h2>
        <div class="code-box" id="testData">{
  "stockCode": "*SA0126*",
  "barcode": "SA0126",
  "description": "‡πÅ‡∏´‡∏ß‡∏ô‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≤‡∏ß",
  "date": "18/11/2567",
  "goldType": "18K-A"
}</div>

        <h2>4. ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå</h2>
        <div class="code-box" id="commandPreview">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á"</div>

        <h2>5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå</h2>
        <button onclick="showCommand()">üìÑ ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</button>
        <button onclick="testPrint()" class="secondary">üñ®Ô∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå</button>
        <button onclick="copyCommand()">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</button>

        <div id="status" class="status"></div>

        <h2>6. ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
        <div class="info-box">
            <strong>‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:</strong><br>
            1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ (USB ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠ Network)<br>
            2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå (EPL ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠ ZPL)<br>
            3. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ<br>
            4. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå<br>
            5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå<br>
            <br>
            <strong>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PC42t:</strong><br>
            - ‡πÉ‡∏ä‡πâ USB (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Network)<br>
            - ‡πÉ‡∏ä‡πâ EPL (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ZPL)<br>
            - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î QZ Tray ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå<br>
            - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡πà‡∏≤‡∏ô USB<br>
            <br>
            <strong>‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:</strong><br>
            - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö USB device ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏≤‡∏¢ USB<br>
            - ‡∏ñ‡πâ‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô ZPL<br>
            - ‡πÄ‡∏õ‡∏¥‡∏î Console (F12) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π logs ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
        </div>
    </div>

    <script type="module">
        // Import services (adjust path as needed)
        import { gemBarcodeService } from '../src/services/barcode/gem-barcode.js';
        import { printService } from '../src/services/barcode/PrintService.js';

        const testData = {
            stockCode: "*SA0126*",
            barcode: "SA0126",
            description: "‡πÅ‡∏´‡∏ß‡∏ô‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≤‡∏ß",
            date: "18/11/2567",
            goldType: "18K-A"
        };

        // Listen to connection change
        document.querySelectorAll('input[name="connection"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const connection = e.target.value;
                document.getElementById('currentConnection').textContent = connection;
                printService.setUseUSB(connection === 'USB');
                console.log('Connection changed to:', connection);
            });
        });

        // Listen to language change
        document.querySelectorAll('input[name="language"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const language = e.target.value;
                document.getElementById('currentLanguage').textContent = language;
                gemBarcodeService.setPrinterLanguage(language);
                console.log('Language changed to:', language);
            });
        });

        // Show command preview
        window.showCommand = function() {
            try {
                const command = gemBarcodeService.previewCommand(testData);
                document.getElementById('commandPreview').textContent = command;
                showStatus('‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                console.error('Error showing command:', error);
                showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message, 'error');
            }
        };

        // Test print
        window.testPrint = async function() {
            try {
                showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå...', 'success');
                const result = await gemBarcodeService.printBarcode(testData);
                showStatus('‚úì ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå', 'success');
                console.log('Print result:', result);
            } catch (error) {
                console.error('Print error:', error);
                showStatus('‚úó ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message, 'error');
            }
        };

        // Copy command to clipboard
        window.copyCommand = function() {
            const command = document.getElementById('commandPreview').textContent;
            navigator.clipboard.writeText(command).then(() => {
                showStatus('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }).catch(err => {
                showStatus('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ', 'error');
            });
        };

        // Show status message
        function showStatus(message, type) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = 'status ' + type;

            if (type === 'success') {
                setTimeout(() => {
                    statusEl.style.display = 'none';
                }, 5000);
            }
        }

        // Initialize with USB and EPL
        printService.setUseUSB(true);
        gemBarcodeService.setPrinterLanguage('EPL');
        console.log('Test page loaded. Default: USB + EPL');
    </script>
</body>
</html>
